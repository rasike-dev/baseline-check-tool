version: '3.8'

services:
  baseline-check:
    image: baseline-check-tool:2.1.3
    container_name: baseline-check-scanner
    volumes:
      - .:/workspace
    working_dir: /workspace
    command: run --paths 'src' --out 'compatibility.json'
    
  # Example for scanning specific directories
  scan-components:
    image: baseline-check-tool:2.1.3
    container_name: baseline-check-components
    volumes:
      - ./src/components:/workspace/components
      - ./src/hooks:/workspace/hooks
    working_dir: /workspace
    command: scan --paths 'components,hooks' --out 'components-scan.json'
    
  # Example for generating HTML report
  generate-report:
    image: baseline-check-tool:2.1.3
    container_name: baseline-check-report
    volumes:
      - .:/workspace
    working_dir: /workspace
    command: report --report 'compatibility.json' --format html --out 'compatibility-report.html'
    depends_on:
      - baseline-check
